# ä»£ç†æœåŠ¡å™¨è‡ªåŠ¨éƒ¨ç½²å·¥å…·é›†

ä¸€å¥—ç”¨äºåœ¨ä½å†…å­˜ç¯å¢ƒä¸‹å¿«é€Ÿéƒ¨ç½²é«˜æ€§èƒ½ä»£ç†æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–è„šæœ¬å·¥å…·é›†ï¼Œæ”¯æŒ Hysteria2 å’Œ TUIC ä¸¤ç§åè®®ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æä¾›ä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨ç½²è„šæœ¬ï¼Œä¸“ä¸ºèµ„æºå—é™ç¯å¢ƒï¼ˆå¦‚ VPSã€å®¹å™¨ï¼‰è®¾è®¡ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿèµ„æºå¹¶ä¼˜åŒ–é…ç½®ï¼Œå®ç°ä¸€é”®éƒ¨ç½²ã€‚

### æ”¯æŒçš„åè®®

- **Hysteria2 v2.6.5** - åŸºäº QUIC çš„é«˜æ€§èƒ½ä»£ç†åè®®
- **TUIC v1.4.5** - è½»é‡çº§ QUIC ä»£ç†åè®®

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ ä¸€é”®éƒ¨ç½²
- è‡ªåŠ¨ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶
- è‡ªåŠ¨ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
- è‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯è¿æ¥é“¾æ¥
- æ”¯æŒè‡ªå®šä¹‰ç«¯å£å’Œå¯†ç 

### ğŸ“Š æ™ºèƒ½èµ„æºç®¡ç†
- è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿå†…å­˜å’Œ CPU æ ¸å¿ƒæ•°
- æ ¹æ®èµ„æºæƒ…å†µè‡ªåŠ¨è°ƒæ•´é…ç½®å‚æ•°
- å®æ—¶ç›‘æ§ CPUã€å†…å­˜ã€ç½‘ç»œä½¿ç”¨ç‡
- èµ„æºè¿‡è½½æ—¶è‡ªåŠ¨é™ä½é…ç½®

### ğŸ”„ é…ç½®æŒä¹…åŒ–
- é…ç½®æ–‡ä»¶è‡ªåŠ¨ä¿å­˜
- é‡å¯åè‡ªåŠ¨æ¢å¤é…ç½®
- æ”¯æŒé…ç½®å¤‡ä»½å’Œæ¢å¤
- è¯ä¹¦æ–‡ä»¶æŒä¹…åŒ–

### ğŸ³ å®¹å™¨å‹å¥½
- è‡ªåŠ¨æ£€æµ‹å®¹å™¨ç¯å¢ƒï¼ˆDockerã€Kubernetesã€Pterodactylï¼‰
- å®¹å™¨ç¯å¢ƒä¸‹å¯ç”¨è¯¦ç»†æ—¥å¿—
- é€‚é…éäº¤äº’å¼ç¯å¢ƒ

### ğŸ›¡ï¸ é«˜å¯ç”¨æ€§
- è¿›ç¨‹å®ˆæŠ¤å’Œè‡ªåŠ¨é‡å¯
- æ”¯æŒ systemd æœåŠ¡
- æ”¯æŒ crontab è‡ªåŠ¨å¯åŠ¨
- å¿ƒè·³ç›‘æ§å’ŒçŠ¶æ€æŠ¥å‘Š

## ğŸ“¦ ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®
- **å†…å­˜**: 32MBï¼ˆè¶…ä½å†…å­˜æ¨¡å¼ï¼‰
- **CPU**: 1 æ ¸å¿ƒ
- **ç³»ç»Ÿ**: Linuxï¼ˆæ”¯æŒ x86_64 å’Œ ARM64ï¼‰
- **ä¾èµ–**: curl, openssl

### æ¨èé…ç½®
- **å†…å­˜**: 512MB æˆ–æ›´é«˜
- **CPU**: 2 æ ¸å¿ƒæˆ–æ›´é«˜
- **ç³»ç»Ÿ**: Ubuntu 20.04+ / Debian 10+ / CentOS 7+

## ğŸš€ ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

### Hysteria2 ä¸€é”®å®‰è£…

```bash
# é»˜è®¤é…ç½®ï¼ˆç«¯å£ 22222ï¼Œé»˜è®¤å¯†ç ï¼‰
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/hy2.sh | sed 's/\r$//' | bash

# æŒ‡å®šç«¯å£ 443
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/hy2.sh | sed 's/\r$//' | bash -s 443

# æŒ‡å®šç«¯å£ 443 å’Œå¯†ç 
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/hy2.sh | sed 's/\r$//' | bash -s 443 mypassword123
```

### TUIC ä¸€é”®å®‰è£…

```bash
# é»˜è®¤é…ç½®ï¼ˆéšæœºç«¯å£ã€UUID å’Œå¯†ç ï¼‰
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/tuic.sh | sed 's/\r$//' | bash

# æŒ‡å®šç«¯å£ 8443
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/tuic.sh | sed 's/\r$//' | bash -s 8443

# æŒ‡å®šç«¯å£ã€UUID å’Œå¯†ç 
curl -Ls https://raw.githubusercontent.com/fabaonb/eishare-jd/refs/heads/main/tuic.sh | sed 's/\r$//' | bash -s 8443 550e8400-e29b-41d4-a716-446655440000 mypass123
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Hysteria2 éƒ¨ç½²

#### åŸºæœ¬éƒ¨ç½²ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
```bash
bash hy2.sh
```

#### è‡ªå®šä¹‰ç«¯å£å’Œå¯†ç 
```bash
bash hy2.sh 443 mypassword123
```

#### å‚æ•°è¯´æ˜
- ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç«¯å£å·ï¼ˆé»˜è®¤ï¼š22222ï¼‰
- ç¬¬äºŒä¸ªå‚æ•°ï¼šè®¤è¯å¯†ç ï¼ˆé»˜è®¤ï¼šieshare2025ï¼‰

### TUIC éƒ¨ç½²

#### åŸºæœ¬éƒ¨ç½²ï¼ˆéšæœºç”Ÿæˆé…ç½®ï¼‰
```bash
bash tuic.sh
```

#### è‡ªå®šä¹‰é…ç½®
```bash
bash tuic.sh 8443 550e8400-e29b-41d4-a716-446655440000 mypass123
```

#### å‚æ•°è¯´æ˜
- ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç«¯å£å·ï¼ˆé»˜è®¤ï¼šéšæœº 20000-60000ï¼‰
- ç¬¬äºŒä¸ªå‚æ•°ï¼šUUIDï¼ˆé»˜è®¤ï¼šè‡ªåŠ¨ç”Ÿæˆï¼‰
- ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå¯†ç ï¼ˆé»˜è®¤ï¼šéšæœºç”Ÿæˆï¼‰

## ğŸ“ é…ç½®æ–‡ä»¶

### Hysteria2 é…ç½®æ–‡ä»¶
- `server.yaml` - ä¸»é…ç½®æ–‡ä»¶
- `cert.pem` - TLS è¯ä¹¦
- `key.pem` - TLS ç§é’¥
- `hy2_config.txt` - é…ç½®ä¿¡æ¯è®°å½•

### TUIC é…ç½®æ–‡ä»¶
- `server.toml` - ä¸»é…ç½®æ–‡ä»¶
- `tuic-cert.pem` - TLS è¯ä¹¦
- `tuic-key.pem` - TLS ç§é’¥
- `tuic_config.txt` - é…ç½®ä¿¡æ¯è®°å½•
- `tuic_link.txt` - å®¢æˆ·ç«¯è¿æ¥é“¾æ¥

## ğŸ“Š èµ„æºç›‘æ§

ä¸¤ä¸ªè„šæœ¬éƒ½å†…ç½®äº†èµ„æºç›‘æ§åŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨åå°ç›‘æ§è¿›ç¨‹ã€‚

### æŸ¥çœ‹ç›‘æ§æ—¥å¿—

**Hysteria2:**
```bash
tail -f hy2_monitor.log
```

**TUIC:**
```bash
tail -f tuic_monitor.log
```

### ç›‘æ§æŒ‡æ ‡
- CPU ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
- å†…å­˜ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
- ç½‘ç»œæµé‡ï¼ˆä¸Šä¼ /ä¸‹è½½ KB/sï¼‰
- å®æ—¶çŠ¶æ€å¿ƒè·³

### åŠ¨æ€è°ƒæ•´
å½“ CPU æˆ–å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡ 85% æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™ä½å¸¦å®½å’Œè¿æ¥æ•°é…ç½®ï¼›å½“èµ„æºä½¿ç”¨ç‡é™è‡³ 50% ä»¥ä¸‹æ—¶ï¼Œä¼šè‡ªåŠ¨æ¢å¤æ ‡å‡†é…ç½®ã€‚

## ğŸ”§ é«˜çº§åŠŸèƒ½

### å¼ºåˆ¶é‡æ–°éƒ¨ç½²
å®Œå…¨æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²ï¼ˆä¼šç”Ÿæˆæ–°çš„è¯ä¹¦å’Œé…ç½®ï¼‰ï¼š

```bash
FORCE_REDEPLOY=true bash hy2.sh
FORCE_REDEPLOY=true bash tuic.sh
```

### æ¸…ç†é‡æ–°éƒ¨ç½²ï¼ˆä¿ç•™è¯ä¹¦ï¼‰
æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²ï¼Œä½†ä¿ç•™è¯ä¹¦æ–‡ä»¶ï¼ˆèŠ‚ç‚¹é“¾æ¥ä¿æŒæœ‰æ•ˆï¼‰ï¼š

```bash
CLEAN_REDEPLOY=true bash hy2.sh
CLEAN_REDEPLOY=true bash tuic.sh
```

### è‡ªåŠ¨å¯åŠ¨é…ç½®

è„šæœ¬ä¼šåœ¨é¦–æ¬¡éƒ¨ç½²æ—¶è¯¢é—®æ˜¯å¦é…ç½®è‡ªåŠ¨å¯åŠ¨ã€‚å¦‚æœè·³è¿‡ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š

**ä½¿ç”¨ systemdï¼ˆæ¨èï¼‰:**
```bash
# Hysteria2
sudo systemctl enable hysteria2
sudo systemctl start hysteria2

# TUIC
sudo systemctl enable tuic
sudo systemctl start tuic
```

**ä½¿ç”¨ crontab:**
```bash
crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ï¼‰
@reboot cd /path/to/script && ./hysteria-linux-amd64 server -c server.yaml &
```

## ğŸ” è¿›ç¨‹ç®¡ç†

### æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
```bash
# æŸ¥çœ‹ Hysteria2 è¿›ç¨‹
ps aux | grep hysteria-linux

# æŸ¥çœ‹ TUIC è¿›ç¨‹
ps aux | grep tuic-server
```

### åœæ­¢æœåŠ¡
```bash
# åœæ­¢ Hysteria2
pkill -f hysteria-linux

# åœæ­¢ TUIC
pkill -f tuic-server
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯ Hysteria2
pkill -f hysteria-linux && bash hy2.sh

# é‡å¯ TUIC
pkill -f tuic-server && bash tuic.sh
```

## ğŸ“± å®¢æˆ·ç«¯é…ç½®

### Hysteria2 å®¢æˆ·ç«¯é“¾æ¥æ ¼å¼
```
hysteria2://å¯†ç @æœåŠ¡å™¨IP:ç«¯å£?sni=www.bing.com&alpn=h3&insecure=1#èŠ‚ç‚¹åç§°
```

### TUIC å®¢æˆ·ç«¯é“¾æ¥æ ¼å¼
```
tuic://UUID:å¯†ç @æœåŠ¡å™¨IP:ç«¯å£?congestion_control=bbr&alpn=h3&allowInsecure=1&sni=www.bing.com&udp_relay_mode=native&disable_sni=0&reduce_rtt=1&max_udp_relay_packet_size=8192#èŠ‚ç‚¹åç§°
```

éƒ¨ç½²å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å®¢æˆ·ç«¯è¿æ¥é“¾æ¥ï¼Œç›´æ¥å¤åˆ¶åˆ°å®¢æˆ·ç«¯å³å¯ä½¿ç”¨ã€‚

## ğŸ³ å®¹å™¨éƒ¨ç½²

### Docker ç¤ºä¾‹

**Hysteria2:**
```dockerfile
FROM ubuntu:22.04
RUN apt-get update && apt-get install -y curl openssl
COPY hy2.sh /app/
WORKDIR /app
CMD ["bash", "hy2.sh"]
```

**TUIC:**
```dockerfile
FROM ubuntu:22.04
RUN apt-get update && apt-get install -y curl openssl
COPY tuic.sh /app/
WORKDIR /app
CMD ["bash", "tuic.sh"]
```

### å®¹å™¨ç¯å¢ƒç‰¹æ€§
- è‡ªåŠ¨æ£€æµ‹å®¹å™¨ç¯å¢ƒ
- å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡º
- æ˜¾ç¤ºå®æ—¶çŠ¶æ€å¿ƒè·³
- è¿‡æ»¤å†—ä½™è¿æ¥æ—¥å¿—

## âš™ï¸ é…ç½®å‚æ•°è¯´æ˜

### å†…å­˜è‡ªé€‚åº”é…ç½®

| å†…å­˜å¤§å° | é…ç½®çº§åˆ« | å¸¦å®½é™åˆ¶ | å¹¶å‘æµ | çª—å£å¤§å° |
|---------|---------|---------|--------|---------|
| < 128MB | è¶…ä½å†…å­˜ | 50Mbps | 2-3 | æœ€å° |
| 128-384MB | ä½å†…å­˜ | 100Mbps | 3-4 | ä¼˜åŒ– |
| 384-768MB | ä¸­ç­‰å†…å­˜ | 150Mbps | 4-6 | å¹³è¡¡ |
| â‰¥ 768MB | æ ‡å‡†é…ç½® | 200Mbps | 6+ | æ ‡å‡† |

### ç›‘æ§é˜ˆå€¼é…ç½®

å¯ä»¥åœ¨è„šæœ¬å¼€å¤´ä¿®æ”¹ä»¥ä¸‹å˜é‡ï¼š

```bash
MONITOR_INTERVAL=10      # ç›‘æ§é—´éš”ï¼ˆç§’ï¼‰
CPU_THRESHOLD=85         # CPU å‘Šè­¦é˜ˆå€¼ï¼ˆ%ï¼‰
MEM_THRESHOLD=85         # å†…å­˜å‘Šè­¦é˜ˆå€¼ï¼ˆ%ï¼‰
HEARTBEAT_INTERVAL=1     # å¿ƒè·³æ—¥å¿—é—´éš”ï¼ˆç§’ï¼‰
```

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :ç«¯å£å·

# æˆ–ä½¿ç”¨ ss
ss -tulpn | grep :ç«¯å£å·
```

### è¯ä¹¦é—®é¢˜
å¦‚æœé‡åˆ°è¯ä¹¦ç›¸å…³é”™è¯¯ï¼Œå¯ä»¥åˆ é™¤è¯ä¹¦æ–‡ä»¶é‡æ–°ç”Ÿæˆï¼š
```bash
rm -f cert.pem key.pem tuic-cert.pem tuic-key.pem
bash hy2.sh  # æˆ– bash tuic.sh
```

### å†…å­˜ä¸è¶³
å¦‚æœç³»ç»Ÿå†…å­˜æä½ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶é™ä½å‚æ•°ï¼š
- å‡å°‘ `max_concurrent_streams`
- é™ä½ `send_window` å’Œ `receive_window`
- å‡å°‘å¸¦å®½é™åˆ¶

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```bash
# Hysteria2 æ—¥å¿—
tail -f hy2_monitor.log

# TUIC æ—¥å¿—
tail -f tuic_monitor.log
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

**æ³¨æ„**: æœ¬å·¥å…·ä»…ç”¨äºåˆæ³•ç”¨é€”ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨è´£ä»»ã€‚
